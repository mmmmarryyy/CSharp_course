# Лабораторная 12. Многопоточность V

## Многопоточный Fizz Buzz (4 балла) - done

Пусть у вас есть четыре функции:
- `printFizz`, которая выводит на консоль слово "Fizz",
- `printBuzz`, которая выводит на консоль слово "Buzz",
- `printFizzBuzz`, которая печатает "FizzBuzz"
- `printNumber`, которая выводит на консоль заданное целое число.

Вам предоставляется экземпляр класса FizzBuzz, который имеет четыре функции: Fizz, Buzz, Fizzbuzz и Number

```c#
public class FizzBuzz 
{ 
    private int n;

    public FizzBuzz(int n) 
    {
        this.n = n; 
    }

    // printFizz() outputs "fizz". 
    public void Fizz(Action printFizz) {
    
    }
    
    // printBuzzz() outputs "buzz". 
    public void Buzz(Action printBuzz) {

    }

    // printFizzBuzz() outputs "fizzbuzz". 
    public void Fizzbuzz(Action printFizzBuzz) {
    
    }

    // printNumber(x) outputs "x", where x is an integer. 
    public void Number(Action<int> printNumber) {

    } 
}
```

Один и тот же экземпляр FizzBuzz будет передан в четыре разных потока:
- **Поток A**: вызывает fizz(), который должен вывести слово «Fizz».
- **Поток B**: вызывает buzz(), который должен вывести слово «Buzz».
- **Поток C**: вызывает fizzbuzz(), который должен вывести слово «FizzBuzz».
- **Поток D**: вызывает number(), который должен выводить только целые числа.

Измените данный класс, чтобы вывести последовательность [1, 2, «Fizz», 4, «Buzz», ...], где i-й элемент:
- "FizzBuzz", если i делится на 3 и 5,
- "Fizz", если i делится на 3, но не на 5,
- "Buzz", если i делится на 5, но не на 3
- i, если i не делится на 3 или 5. 

Реализуйте класс FizzBuzz:  
FizzBuzz (int n) Инициализирует объект числом n, представляющим длину последовательности, которая должна быть напечатана.

### Пример 1:
Ввод: n = 5  
Вывод: [1, 2, «fizz», 4, «buzz»]

### Пример 2:
Ввод: n = 15  
Вывод: [1, 2, «fizz», 4, «buzz», «fizz», 7, 8, «fizz», «buzz», 11, «fizz», 13, 14, «fizzbuzz»]


## Задача об общей душевой (3 балла)

Предположим, что в общежитии есть душевая, которой могут пользоваться и мужчины и женщины, но не одновременно. Опишите протекающие процессы «помывки» мужчин и женщин. Одновременно в душевой может находиться сколько угодно мужчин или женщин. Решение должно обеспечивать необходимое исключение и отсутствие взаимоблокировок. Решение может быть не справедливым.

## Задача о голодных птенцах (3 балла) - done

Есть N птенцов и их мать. Птенцы едят из общей миски, в которой сначала находится F порций пищи. Каждый птенец съедает порцию еды, спит некоторое случайное время, затем снова ест. Если хватает еды, то одновременно может есть несколько птенцов. Когда кончается еда, птенец, евший последним, зовет мать. Мать наполняет миску F порциями еды и снова ждет, пока миска опустеет. Эти действия повторяются без конца. Представьте птиц процессами и разработайте код, моделирующий их действия.

## Задача об узком мосте (3 балла) - done

К узкому мосту приезжают машины с севера и с юга. Машины, движущиеся в одном направлении, могут переезжать мост одновременно, а в противоположном – нет. Разработайте решения для системы переезда моста. Решение может быть несправедливым.

## Неделимая рассылка (4 балла)

Реализуйте задачу о неделимой рассылке. Имеется несколько процессов-производителей, которые помещают свои сообщения в ограниченную очередь. Если места в очереди нет, они ждут, пока место не появится. Несколько процессов-потребителей должны все прочесть каждое из сообщений. Когда сообщение прочитано всеми потребителями, оно удаляется из очереди. Количество процессов-производителей и процессов-потребителей не фиксировано и может меняться со временем.

